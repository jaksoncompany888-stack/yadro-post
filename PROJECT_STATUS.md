# Yadro Post - Статус проекта

> Последнее обновление: 30.01.2026

---

## Структура проекта

```
yadro-post/
├── frontend/     ← Next.js 14
├── backend/      ← Python FastAPI (бывший yadro-smm)
└── PROJECT_STATUS.md
```

**Репозиторий:** https://github.com/jaksoncompany888-stack/yadro-post
**Сервер:** AWS EC2 (35.156.188.57)

---

## Полностью готово

### Авторизация (Backend)
- [x] JWT токены (`backend/app/api/auth.py`)
- [x] Telegram Login Widget
- [x] Роли: admin, smm, user
- [x] Refresh токен
- [x] Проверка подписки на канал

### Провайдеры соцсетей (Backend)
- [x] TelegramProvider (`backend/app/providers/telegram.py`)
- [x] VKProvider (`backend/app/providers/vk.py`)
- [x] Базовый класс SocialProvider
- [x] ProviderManager для управления

### Scheduler (Backend)
- [x] Планировщик задач (`backend/app/scheduler/`)
- [x] Отложенная публикация
- [x] Cron-расписание

### AI генерация (Backend)
- [x] Claude интеграция (`backend/app/llm/`)
- [x] Генерация постов
- [x] Редактирование постов

### Календарь (Frontend)
- [x] Отображение постов по дням
- [x] Цветовая индикация платформ
- [x] Фильтры по платформам
- [x] Кнопки "Создать пост" и "Создать заметку"
- [x] Обновление после создания поста (refreshKey)

### Создание поста (Frontend)
- [x] Режим "Пост" и "Заметка" (через ?type=note)
- [x] Скрытие выбора каналов для заметок
- [x] Скрытие AI генерации для заметок
- [x] Диалог "Сохранить изменения?" при выходе
- [x] Предупреждение при закрытии вкладки (beforeunload)
- [x] Форматирование текста (bold, italic, списки, emoji)
- [x] Кнопки "В черновики" и "Запланировать"

### Боковая панель (Frontend)
- [x] "Мои ресурсы" (переименовано с "Мои каналы")
- [x] 7 платформ: Telegram, VK, Instagram, TikTok, YouTube, Facebook, OK
- [x] Автопостинг только для Telegram и VK (can_post флаг)

### AI Агент (Frontend)
- [x] История 5 чатов (MAX_HISTORY_COUNT)
- [x] Логика shouldGenerate (генерация vs редактирование)
- [x] Сохранение в localStorage

### Аналитика (Frontend)
- [x] Выбор канала (dropdown)
- [x] Фильтр периода (7д, 30д, 90д)
- [x] KPI карточки: Reach, Views, ER, Subscribers
- [x] KPI: Средний охват на пост (Avg Reach per Post)
- [x] Графики: просмотры, охват, вовлечённость за неделю
- [x] Детализация вовлечённости (лайки, комменты, репосты)
- [x] Топ-10 постов по охвату
- [x] Топ-10 постов по ER
- [x] Анти-топ (провальные посты)

### Прочее
- [x] Плагины убраны из навигации

---

## Частично готово / Требует доработки

### Анализ конкурентов (`/integrations`)
**Готово:**
- [x] Добавление Telegram канала по @username
- [x] Базовые метрики (подписчики, просмотры, реакции, ER)
- [x] Анализ стиля (тип контента, длина, эмодзи)
- [x] Топ слова и паттерны хуков

**НЕ готово:**
- [ ] Поддержка других платформ (TikTok, Instagram, YouTube, VK, FB, OK)
- [ ] Выбор типа: "Постоянный мониторинг" / "Разовый анализ"
- [ ] Дашборд с виджетами (графики роста, топ-3 поста за период)
- [ ] Графики: Reach по времени, рост подписчиков, ER по времени
- [ ] Топ-10 постов конкурента по охвату / ER
- [ ] Сравнительный анализ до 5 каналов
- [ ] Проверка на накрутку (ИИ оценка)
- [ ] Лента "Идей для вдохновения"

### Медиа библиотека (`/media`)
**Готово:**
- [x] Базовая страница (заглушка)
- [x] Фильтр: все / изображения / видео
- [x] Поиск

**НЕ готово:**
- [ ] Реальная загрузка файлов на сервер
- [ ] Валидация: лимит видео 20 МБ
- [ ] Загрузка из буфера обмена
- [ ] Загрузка по URL
- [ ] Запрос имени файла перед загрузкой
- [ ] Выбор целевой платформы

---

## Где используется Mock данные

| Модуль | Файл | Что замокано |
|--------|------|--------------|
| Аналитика | `frontend/src/app/analytics/page.tsx` | `generateMockStats()` — метрики каналов |
| Аналитика | `frontend/src/app/analytics/page.tsx` | `generateMockPosts()` — топ-листы постов |
| Аналитика | `frontend/src/app/analytics/page.tsx` | `weeklyViews`, `weeklyReach`, `weeklyEngagement` |
| Медиа | `frontend/src/app/media/page.tsx` | Нет загрузки файлов |

---

## Код товарища (ветка test)

**Что сделал:** Создал `backend 2/` с "новой архитектурой"

**Детальное сравнение:**
| Функция | Текущий backend | backend 2 | Нужно интегрировать? |
|---------|----------------|-----------|---------------------|
| JWT Auth | ✅ Telegram Widget | Email/password | ❌ Не нужно |
| БД | SQLite | PostgreSQL | ⚠️ Позже для масштабирования |
| Scheduler | ⚠️ Свой (только хранит в БД) | ✅ APScheduler (фоновые задачи) | ✅ **Да** |
| Telegram Provider | ✅ Полный (aiogram) | Базовый | ❌ Не нужно |
| VK Provider | ✅ Полный | Базовый | ❌ Не нужно |
| Instagram Provider | ❌ Нет | Заглушка | ⚠️ Позже |
| Автосбор аналитики | ❌ Нет | ✅ Через 1ч и 24ч | ✅ **Да** |
| AI стили | ❌ Нет | casual/formal/funny | ✅ **Да** |
| Retry публикации | ❌ Нет | 3 попытки | ✅ **Да** |

**Что нужно интегрировать из backend 2:**
- [ ] APScheduler для автоматического выполнения запланированных постов
- [ ] Автосбор аналитики (через 1ч после публикации, потом каждые 24ч)
- [ ] AI стили генерации (casual/formal/funny)
- [ ] Retry логика для публикации (3 попытки с задержкой)

**Что НЕ нужно:**
- PostgreSQL — пока SQLite достаточно
- Email/password auth — Telegram Widget работает
- Новые провайдеры — текущие лучше

**Проблемы с backend 2:**
- Положил в новую папку вместо интеграции
- Несовместим с текущим фронтендом (другие endpoints)
- Требует PostgreSQL (усложняет деплой)

**Решение:** Взять 4 полезные фичи и интегрировать в существующий backend

---

## Memory с FTS

**Статус:** Не начато
**Описание:** Долгосрочная память AI с Full-Text Search / векторным поиском
**Задача:** Обсудить с товарищем архитектуру

---

## Следующие задачи (приоритет)

1. **Медиа библиотека** — загрузка файлов (фронт + бэк)
2. **Анализ конкурентов** — UI для других платформ
3. **Аналитика** — реальный API вместо mock
4. **AI стили** — интеграция из backend 2
5. **Автосбор аналитики** — интеграция из backend 2

---

## Технический стек

- **Frontend:** Next.js 14, React, TypeScript, Tailwind CSS
- **Backend:** Python FastAPI, SQLite
- **AI:** Claude (Anthropic)
- **Деплой:** AWS EC2, PM2, nginx
