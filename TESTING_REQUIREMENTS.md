# ТЗ тестирования - Полный чек-лист

## ВХОД НА САЙТ (Telegram авторизация)

### Роли пользователей:
- [ ] **Администратор**: Полный доступ к панели управления, просмотр всех пользователей, выдача/изменение подписок, модерация
- [ ] **SMM-щик (Менеджер)**: Ограниченный доступ, просмотр списка пользователей, проверка статуса подписки, НЕ может менять тарифы
- [ ] **Пользователь (без пакета / тестовый)**: Видит интерфейс, доступ к платному контенту закрыт, видит предложение оформить подписку

### Авторизация через Telegram:
- [ ] Защищенная страница, вход ТОЛЬКО через Telegram
- [ ] Подтверждение личности в боте + подписка на канал "Ядро"
- [ ] После привязки - вайт-лист и пробный доступ

### Способы авторизации (выбрать один):
- Telegram Login Widget (простой, но легко обойти)
- **Telegram Bot + Deep Linking (рекомендуется)** - уникальная ссылка-ключ
- Telegram OAuth (для PWA)

---

## 1. КАЛЕНДАРЬ КОНТЕНТА

### Основной функционал:
- [x] Две отдельные функции: "Создать пост" и "Создать заметку"
  - "Создать пост" - полный цикл: канал → дата → тема → генерация
  - "Создать заметку" - ручное добавление идеи-напоминания БЕЗ генерации
- [x] Фильтры по платформам над календарём ("Все", "Telegram", "Instagram" и т.д.)
- [x] Уникальные цвета для каждой платформы:
  - VK — светло-голубой
  - Facebook — тёмно-синий
  - Telegram — синий
  - Instagram — градиентный
  - TikTok — черный
  - YouTube — красный
  - OK — оранжевый

### Баги которые нужно пофиксить:
- [ ] **КАЛЕНДАРЬ НЕ РАБОТАЕТ** - все посты и заметки должны мгновенно появляться на своих датах
- [ ] Диалог подтверждения "Сохранить изменения?" с кнопками "Да"/"Нет"
- [ ] Синхронизация между БД и интерфейсом календаря

---

## 2. МОИ РЕСУРСЫ (бывш. "Мои каналы")

- [x] Переименовать "Мои каналы" → "Мои ресурсы"
- [x] 7 платформ: Telegram, VK, Instagram, TikTok, YouTube, Facebook, Одноклассники
- [x] Разная логика подключения:
  - **Telegram** — добавление бота администратором (@Yadro888_bot)
  - **VK** — OAuth авторизация
  - **Остальные** (TikTok, YouTube, Instagram, Facebook, OK) — ввод ссылки и названия
- [ ] Автопостинг сначала только для Telegram и VK (остальные — планирование)

---

## 3. ФОРМА СОЗДАНИЯ ПОСТА

- [x] **УБРАТЬ** кнопку "Добавить канал" из формы создания поста
- [x] Оставить только выпадающий список уже подключённых каналов
- [ ] Управление каналами — только в разделе настроек

---

## 4. ЧЕРНОВИКИ

- [x] Отдельный раздел "Черновики" в виде общего списка (как чат)
- [x] Все сохранённые, но незапланированные посты и заметки
- [ ] Редактирование черновиков, дополнение вручную
- [ ] Перенос из черновиков в календарь

---

## 5. AI-АССИСТЕНТ

### КРИТИЧНЫЙ БАГ:
> **"ИНОГДА АССИСТЕНТ МЕШАЕТ, А НЕ ПОМОГАЕТ. Прошу поменять последний абзац, а он переписывает полностью концовку поста."**

- [x] **ИСПРАВЛЕНО**: При запросе "убери абзац" или "поменяй абзац" — делает ТОЧЕЧНУЮ правку, НЕ переписывает весь текст
- [x] Используется `aiApi.edit()` вместо `aiApi.generate()` для редактирования (ключевые слова: убери, удали, поменяй, измени, замени, добавь, сделай жирным и т.д.)

### История чатов:
- [x] История последних 3-5 диалогов в разделе "Ассистент"
- [x] Кнопка "Запланировать пост" из каждого чата
- [x] Кнопка "Сохранить в черновики" из каждого чата
- [x] Ограничение 3-5 диалогами (не перегружать БД)

### Текстовый редактор:
- [x] Базовое форматирование: жирный, курсив, списки
- [x] Вставка и замена эмодзи
- [x] Простые инструменты редактирования
- [x] **Ручное редактирование приоритетнее ИИ** — чтобы не обращаться к ИИ для мелких правок

---

## 6. АНАЛИТИКА

### По каждому каналу отдельно:
- [x] Выбор периода: День / Неделя / Месяц / Кастом
- [x] Выбор канала (Instagram / TikTok / YouTube / Telegram / VK / Shorts / Reels)

### Ключевые метрики (KPI):
- [x] **Reach (Охват)** — главный показатель
- [x] **Net New Followers (Прирост подписчиков)** — динамика, не просто число
- [x] **Engagement Rate (Вовлечённость)** — реакции + комментарии + репосты
- [x] **Views/Impressions (Просмотры)** — общее количество показов
- [x] **ER/Reach Ratio** — % взаимодействий от охвата
- [x] **Avg Reach per Post** — средний охват на пост

### Графики:
- [x] Reach по времени
- [x] Подписчики (рост/падение)
- [x] ER по времени

### Контент-аналитика:
- [ ] Топ-10 постов по охвату
- [ ] Топ-10 по ER
- [ ] Анти-топ (провальные посты)

---

## 7. ПЛАГИНЫ / ДОП. ФУНКЦИИ

- [x] **ПОКА ПОЛНОСТЬЮ УБРАТЬ** (убран из сайдбара)

---

## 8. МЕДИА БИБЛИОТЕКА

### Загрузка файлов:
- [ ] Типы: JPEG, PNG, GIF, MP4
- [ ] Лимит видео: не более 20 МБ
- [ ] Источники: с устройства, из буфера обмена, по URL

### Процесс загрузки:
- [ ] Запрос имени файла перед загрузкой
- [ ] Указание целевой платформы (соцсеть)

---

## 9. АНАЛИЗ КОНКУРЕНТОВ

### A. Добавление канала для мониторинга:
- [ ] Источники: URL или @ник
- [ ] Платформы: Telegram, TikTok, Instagram, Facebook, YouTube, VK, OK
- [ ] Тип подписки: "Постоянный мониторинг" или "Разовый анализ"
- [ ] Настройки частоты обновления

### B. Дашборд мониторинга:
- [ ] Список отслеживаемых каналов с ключевой метрикой
- [ ] Группировка по платформам, нишам, приоритету
- [ ] Виджеты по каждому конкуренту: график роста, активность, топ-3 поста
- [ ] Лента "Идей для вдохновения" — лучшие посты по ER

### C. Отчёт разового анализа:
- [ ] "Визитная карточка": подписчики, прирост, охват, ER
- [ ] Проверка на накрутку (ИИ)
- [ ] Анализ контента: тональность, частотность, темы
- [ ] Сравнительный анализ с таблицей по 5-10 показателям

### D. Сравнительный анализ:
- [ ] Выбор до 5 каналов для сравнения
- [ ] Сравнение по: Аудитория, Контент, Эффективность
- [ ] Инсайты от ИИ

---

## ПРИОРИТЕТЫ ИСПРАВЛЕНИЙ

### СРОЧНО (блокеры):
1. ~~**AI-ассистент переписывает вместо точечной правки**~~ ✅ ИСПРАВЛЕНО — теперь использует `edit` API
2. **Telegram авторизация с ролями** — Admin/SMM/User

### ВЫСОКИЙ:
3. Календарь не показывает посты сразу после создания
4. Диалог подтверждения при создании/редактировании

### СРЕДНИЙ:
5. Медиа библиотека — загрузка файлов
6. Анализ конкурентов — дашборд мониторинга

### НИЗКИЙ (отложено на 2-3 недели):
7. Полный мультиплатформенный автопостинг
8. Сравнительный анализ конкурентов

---

## ВЫПОЛНЕНО ✅

- [x] Убрана кнопка "Добавить канал" из формы создания поста
- [x] Диалог подтверждения добавлен
- [x] Календарь показывает посты
- [x] "Мои каналы" → "Мои ресурсы"
- [x] 7 платформ с разной логикой подключения
- [x] Раздел "Черновики"
- [x] Раздел "Заметки"
- [x] История чатов в AI-ассистенте (3-5 диалогов)
- [x] Кнопки "Запланировать" и "В черновики" в ассистенте
- [x] Текстовый редактор (жирный, курсив, списки, эмодзи)
- [x] Фильтры по платформам в календаре
- [x] Цвета платформ в календаре
- [x] Аналитика с Reach, ER, Views, подписчики
- [x] Графики в аналитике
- [x] Убран раздел "Плагины"
- [x] "Создать пост" и "Создать заметку" в календаре
- [x] **AI-ассистент использует edit API для точечного редактирования** (исправлен критичный баг)
- [x] **AI-ассистент убран с главной страницы** (доступен только через меню "AI Агент")
